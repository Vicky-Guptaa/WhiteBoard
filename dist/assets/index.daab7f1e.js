var ee=Object.defineProperty;var F=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var J=(t,e,o)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,O=(t,e)=>{for(var o in e||(e={}))te.call(e,o)&&J(t,o,e[o]);if(F)for(var o of F(e))ne.call(e,o)&&J(t,o,e[o]);return t};const oe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}};oe();const le=document.querySelector(".for-canvas"),A=document.querySelector(".pen"),H=document.querySelector(".pen-color"),k=document.querySelector(".pen-slider"),U=document.querySelector(".bucket-color"),$=document.querySelector(".eraser"),se=document.querySelector(".clear"),D=document.querySelector(".save-image"),G=document.querySelectorAll(".header-icons-styles"),v=document.querySelector(".selected-tools"),ie=document.querySelector(".save-storage"),re=document.querySelector(".load-storage"),ce=document.querySelector(".delete-storage"),ae=document.querySelector(".undo"),de=document.querySelector(".redo"),ue=document.querySelector("header"),he=document.querySelector(".diff-shapes"),R=document.querySelector(".diff-shapes-container"),fe=document.querySelectorAll(".shape"),u=document.createElement("canvas");u.id="canvas";const n=u.getContext("2d");let h=10,Y="#fff",f="#000000",g=!1,z=!1,l=[],m=-1,a=[],B=!1,d="pen",S=[];he.addEventListener("click",()=>{R.classList.toggle("invisible"),R.classList.toggle("scale-0"),R.classList.toggle("-translate-x-[70%]")});fe.forEach(t=>{t.addEventListener("click",()=>{p(),d=t.getAttribute("data-value"),v.textContent=t.getAttribute("data-value")})});U.addEventListener("input",()=>{Y=U.firstElementChild.value,x(),C()});H.addEventListener("input",()=>{g=!1,f=H.firstElementChild.value});$.addEventListener("click",()=>{v.textContent="Eraser",g=!0,d="pen",G.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),$.classList.add("selected-icon-style"),f=Y,h=50,k.firstElementChild.value=h});k.addEventListener("change",()=>{h=k.firstElementChild.value});A.addEventListener("click",p);ae.addEventListener("click",ge);de.addEventListener("click",me);function ge(){m<0||(m--,x(),C(),v.textContent="Undo",setTimeout(p,1e3))}function me(){l.length-1!==m&&(m++,x(),C(),v.textContent="Redo",setTimeout(p,1e3))}function p(){d="pen",g=!1,v.textContent="Pen",f=H.firstElementChild.value,h=10,G.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),A.classList.add("selected-icon-style"),k.firstElementChild.value=h}function x(){u.width=window.innerWidth*.95,u.height=window.innerHeight-ue.offsetHeight*1.7,n.fillStyle=Y,n.fillRect(0,0,u.width,u.height),le.appendChild(u)}function ve(){if(l.length===0)return;let t=u.offsetWidth,e=u.offsetHeight,o=l[0][0].h,r=l[0][0].w,s=t/r,i=e/o;for(let c=0;c<l.length;c++)for(let L=0;L<l[c].length;L++)l[c][L].w=t,l[c][L].h=e,l[c][L].x*=s,l[c][L].y*=i}window.addEventListener("resize",()=>{x(),console.log("Hello"),ve(),C()});x();function C(){for(let t=0;t<=m;t++)if(!!l[t])for(let e=1;e<l[t].length;e++)l[t][e].shape==="pen"?(n.beginPath(),n.moveTo(l[t][e-1].x,l[t][e-1].y),n.lineWidth=l[t][e-1].size,n.lineCap="round",l[t][e-1].erase?n.strokeStyle=Y:n.strokeStyle=l[t][e-1].color,n.lineTo(l[t][e].x,l[t][e].y),n.stroke()):(n.moveTo(l[t][e-1].x,l[t][e-1].y),n.beginPath(),I(l[t]))}se.addEventListener("click",()=>{x(),l=[],v.textContent="Canvas Cleared",setTimeout(p,1500)});function y(t,e,o,r,s,i,c,L,_){const W={x:t,y:e,size:o,color:r,erase:s,h:i,w:c,shape:L};l.length!==m&&(l=l.splice(0,m+1)),_.push(W)}function M(t){const e=u.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top,h:e.height,w:e.width}}u.addEventListener("mousedown",t=>{z=!0;const e=M(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=f,a=[],d!=="pen"&&(S=[],y(e.x,e.y,h,f,g,e.h,e.w,d,a),y(e.x,e.y,h,f,g,e.h,e.w,d,S))});u.addEventListener("mousemove",t=>{if(!!z)if(d==="pen"){const e=M(t);n.lineTo(e.x,e.y),n.stroke(),y(e.x,e.y,h,f,g,e.h,e.w,d,a);return}else{const e=M(t);y(e.x,e.y,h,f,g,e.h,e.w,d,S),x(),C(),n.beginPath(),n.moveTo(e.x,e.y),I(S)}});function E(t,e,o,r,s,i){switch(t){case"rectangle-stroke":{n.strokeStyle=i,n.strokeRect(e,o,r,s);break}case"rectangle-fill":{n.fillStyle=i,n.fillRect(e,o,r,s);break}case"circle-stroke":{n.lineCap="round",n.arc(e,o,Math.max(s,r),0,2*Math.PI,!0),n.strokeStyle=i,n.stroke();break}case"circle-fill":{n.lineCap="round",n.fillStyle=i,n.arc(e,o,Math.max(s,r),0,2*Math.PI,!0),n.fill();break}case"line":{n.lineCap="round",n.strokeStyle=i,n.lineTo(e,o),n.stroke();break}default:console.log("Something Went Wrong! The Chosen Shape Is Not In Option")}n.closePath()}function I(t){if(t.length<2)return;let e={x:t[0].x,y:t[0].y},o={x:t[t.length-1].x,y:t[t.length-1].y},r=t[0].color,s=t[0].shape,i=o.x-e.x,c=o.y-e.y;if(n.lineWidth=t[0].size,s==="line"){n.moveTo(e.x,e.y),E(s,o.x,o.y,i,c,r);return}if(s.includes("circle")){i=Math.abs(i),c=Math.abs(c),n.moveTo(o.x+Math.max(c,i),o.y),E(s,o.x,o.y,i,c,r);return}c>0&&i>0?E(s,e.x,e.y,i,c,r):c>0?E(s,o.x,e.y,Math.abs(i),c,r):i>0?E(s,e.x,o.y,i,Math.abs(c),r):E(s,o.x,o.y,Math.abs(i),Math.abs(c),r)}u.addEventListener("mouseup",t=>{if(d!=="pen"){let e=M(t);y(e.x,e.y,h,f,g,e.h,e.w,d,a),l.push(a),m=l.length-1,x(),C()}else if(a.length!==0){if(a.length===1){const e=O({},a[0]);e.x+=1e-4,a.push(e),console.log(a)}l.push(a),m=l.length-1}z=!1});function X(t){const e=u.getBoundingClientRect();return{x:t.changedTouches[0].clientX-e.left,y:t.changedTouches[0].clientY-e.top,h:e.height,w:e.width}}u.addEventListener("touchstart",t=>{B=!0;const e=X(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=f,a=[],d!=="pen"&&(S=[],y(e.x,e.y,h,f,g,e.h,e.w,d,a),y(e.x,e.y,h,f,g,e.h,e.w,d,S))});u.addEventListener("touchmove",t=>{if(!!B)if(d==="pen"){const e=X(t);n.lineTo(e.x,e.y),n.stroke(),y(e.x,e.y,h,f,g,e.h,e.w,d,a);return}else{const e=X(t);y(e.x,e.y,h,f,g,e.h,e.w,d,S),x(),C(),n.beginPath(),n.moveTo(e.x,e.y),I(S)}});u.addEventListener("touchend",t=>{if(d!=="pen"){let e=X(t);y(e.x,e.y,h,f,g,e.h,e.w,d,a),l.push(a),I(a),m=l.length-1}else if(a.length!==0){if(a.length===1){const e=O({},a[0]);e.x+=1e-4,a.push(e),console.log(a)}l.push(a),m=l.length-1}B=!1});ie.addEventListener("click",()=>{localStorage.setItem("saveCanvas",JSON.stringify(l)),v.textContent="Canvas Saved",setTimeout(p,1500)});re.addEventListener("click",()=>{localStorage.getItem("saveCanvas")?(l=JSON.parse(localStorage.saveCanvas),m=l.length-1,v.textContent="Canvas Loaded",C(),setTimeout(p,1500)):(v.textContent="Canvas Not Found",setTimeout(p,1500))});ce.addEventListener("click",()=>{localStorage.removeItem("saveCanvas"),v.textContent="Cleared Local Storage",setTimeout(p,1500)});D.addEventListener("click",()=>{D.firstElementChild.href=u.toDataURL("image/jpeg",1),D.firstElementChild.download="paint-example.jpeg",v.textContent="Image File Saved",setTimeout(p,1500)});const Q=document.querySelector(".bucket-set"),P=document.querySelector(".bucket-color-wrapper"),pe=document.querySelector(".pen-tool"),N=document.querySelector(".pen-tools-wrapper"),K=document.querySelector(".drop-menu"),j=document.querySelector(".drop-menu-items-container");console.log(P,Q);Q.addEventListener("click",()=>{P.classList.toggle("invisible"),P.classList.toggle("scale-0"),P.classList.toggle("-translate-x-[100%]")});pe.addEventListener("click",()=>{N.classList.toggle("invisible"),N.classList.toggle("scale-0"),N.classList.toggle("-translate-x-[70%]")});K.addEventListener("click",()=>{K.firstElementChild.classList.toggle("-rotate-90"),j.classList.toggle("translate-x-[45%]"),j.classList.toggle("-translate-y-[70%]"),j.classList.toggle("scale-0")});const V=document.querySelector("canvas"),Z=document.querySelectorAll(".sticky-wrapper");let w=0,T=0,b=!1,q=!1;Z.forEach(t=>{t.addEventListener("mousedown",e=>{w=e.clientX-t.offsetLeft,T=e.clientY-t.offsetTop,b=!0}),t.addEventListener("mousemove",e=>{if(!b)return;let o=e.clientY-T,r=e.clientX-w;t.style.top=o+"px",t.style.left=r+"px"}),V.addEventListener("mousemove",e=>{if(!b)return;let o=e.clientY-T,r=e.clientX-w;t.style.top=o+"px",t.style.left=r+"px"}),t.addEventListener("mouseup",()=>{b=!1}),t.addEventListener("drag",()=>!1)});Z.forEach(t=>{t.addEventListener("touchstart",e=>{w=e.changedTouches[0].clientX-t.offsetLeft,T=e.changedTouches[0].clientY-t.offsetTop,q=!0}),t.addEventListener("touchmove",e=>{if(!q)return;let o=e.changedTouches[0].clientY-T,r=e.changedTouches[0].clientX-w;t.style.top=o+"px",t.style.left=r+"px"}),V.addEventListener("touchmove",e=>{if(!q)return;let o=e.changedTouches[0].clientY-T,r=e.changedTouches[0].clientX-w;t.style.top=o+"px",t.style.left=r+"px"}),t.addEventListener("touchend",()=>{q=!1}),t.addEventListener("drag",()=>!1)});
