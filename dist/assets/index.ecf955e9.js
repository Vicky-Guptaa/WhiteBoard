var K=Object.defineProperty;var N=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var j=(t,e,l)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,b=(t,e)=>{for(var l in e||(e={}))A.call(e,l)&&j(t,l,e[l]);if(N)for(var l of N(e))G.call(e,l)&&j(t,l,e[l]);return t};const Q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}};Q();const V=document.querySelector(".for-canvas"),J=document.querySelector(".pen"),W=document.querySelector(".pen-color"),E=document.querySelector(".pen-slider"),z=document.querySelector(".bucket-color"),B=document.querySelector(".eraser"),Z=document.querySelector(".clear"),T=document.querySelector(".save-image"),U=document.querySelectorAll(".header-icons-styles"),g=document.querySelector(".selected-tools"),_=document.querySelector(".save-storage"),$=document.querySelector(".load-storage"),ee=document.querySelector(".delete-storage"),te=document.querySelector(".undo"),ne=document.querySelector(".redo"),oe=document.querySelector("header"),se=document.querySelector(".diff-shapes"),q=document.querySelector(".diff-shapes-container"),le=document.querySelectorAll(".shape"),a=document.createElement("canvas");a.id="canvas";const n=a.getContext("2d");let h=10,w="#fff",m="#000000",v=!1,I=!1,o=[],f=-1,c=[],O=!1,u="pen";se.addEventListener("click",()=>{q.classList.toggle("invisible"),q.classList.toggle("scale-0"),q.classList.toggle("-translate-x-[70%]")});le.forEach(t=>{t.addEventListener("click",()=>{p(),u=t.getAttribute("data-value"),g.textContent=t.getAttribute("data-value")})});z.addEventListener("input",()=>{w=z.firstElementChild.value,S(),x()});W.addEventListener("input",()=>{v=!1,m=W.firstElementChild.value});B.addEventListener("click",()=>{g.textContent="Eraser",v=!0,U.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),B.classList.add("selected-icon-style"),m=w,h=50,E.firstElementChild.value=h});E.addEventListener("change",()=>{h=E.firstElementChild.value});J.addEventListener("click",p);te.addEventListener("click",re);ne.addEventListener("click",ie);function re(){f<0||(f--,S(),x(),g.textContent="Undo",setTimeout(p,1e3))}function ie(){o.length-1!==f&&(f++,S(),x(),g.textContent="Redo",setTimeout(p,1e3))}function p(){u="pen",v=!1,g.textContent="Pen",m=W.firstElementChild.value,h=10,U.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),J.classList.add("selected-icon-style"),E.firstElementChild.value=h}function S(){a.width=window.innerWidth*.95,a.height=window.innerHeight-oe.offsetHeight-50,n.fillStyle=w,n.fillRect(0,0,a.width,a.height),V.appendChild(a),p()}function ce(){if(o.length===0)return;let t=a.offsetWidth,e=a.offsetHeight,l=o[0][0].h,d=o[0][0].w,s=t/d,r=e/l;for(let i=0;i<o.length;i++)for(let y=0;y<o[i].length;y++)o[i][y].w=t,o[i][y].h=e,o[i][y].x*=s,o[i][y].y*=r}window.addEventListener("resize",()=>{S(),console.log("Hello"),ce(),x()});S();function x(){for(let t=0;t<=f;t++)for(let e=1;e<o[t].length;e++)o[t][e].shape==="pen"?(n.beginPath(),n.moveTo(o[t][e-1].x,o[t][e-1].y),n.lineWidth=o[t][e-1].size,n.lineCap="round",o[t][e-1].erase?n.strokeStyle=w:n.strokeStyle=o[t][e-1].color,n.lineTo(o[t][e].x,o[t][e].y),n.stroke()):(n.moveTo(o[t][e-1].x,o[t][e-1].y),n.beginPath(),D(o[t]),console.log(o[t]))}Z.addEventListener("click",()=>{S(),o=[],g.textContent="Canvas Cleared",setTimeout(p,1500)});function L(t,e,l,d,s,r,i,y){const Y={x:t,y:e,size:l,color:d,erase:s,h:r,w:i,shape:y};o.length!=f&&(o=o.splice(0,f+1)),c.push(Y)}function H(t){const e=a.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top,h:e.height,w:e.width}}a.addEventListener("mousedown",t=>{I=!0;const e=H(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=m,c=[],u!=="pen"&&(console.log("mdwn",u),L(e.x,e.y,h,m,v,e.h,e.w,u))});a.addEventListener("mousemove",t=>{if(I&&u==="pen"){const e=H(t);n.lineTo(e.x,e.y),n.stroke(),L(e.x,e.y,h,m,v,e.h,e.w,u)}});function C(t,e,l,d,s,r){switch(t){case"rectangle-stroke":{n.strokeRect(e,l,d,s);break}case"rectangle-fill":{n.fillStyle=r,n.fillRect(e,l,d,s);break}case"circle-stroke":{console.log(r),n.arc(e,l,Math.max(s,d),0,2*Math.PI,!0),n.stroke();break}case"circle-fill":{n.fillStyle=r,n.arc(e,l,Math.max(s,d),0,2*Math.PI,!0),n.fill();break}case"line":{n.lineTo(e,l),n.stroke();break}case"pen":{n.lineTo(e,l),n.stroke();break}default:console.log("Something Went Wrong! The Chosen Shape Is Not In Option")}}function D(t){if(t.length<2)return;let e={x:t[0].x,y:t[0].y},l={x:t[1].x,y:t[1].y},d=t[0].color,s=t[0].shape,r=l.x-e.x,i=l.y-e.y;if(n.lineWidth=t[0].size,(s==="line"||s==="pen")&&n.moveTo(e.x,e.y),!s.includes("rectangle")){C(s,l.x,l.y,Math.abs(r),Math.abs(i),d);return}i>0&&r>0?C(s,e.x,e.y,r,i,d):i>0?C(s,l.x,e.y,Math.abs(r),i,d):r>0?C(s,e.x,l.y,r,Math.abs(i),d):C(s,l.x,l.y,Math.abs(r),Math.abs(i),d)}a.addEventListener("mouseup",t=>{if(u!=="pen"){console.log("rectangle");let e=H(t);L(e.x,e.y,h,m,v,e.h,e.w,u),D(c),o.push(c),f=o.length-1}else if(c.length!==0){if(c.length===1){const e=b({},c[0]);e.x+=1e-4,c.push(e),console.log(c)}o.push(c),f=o.length-1}I=!1});function R(t){const e=a.getBoundingClientRect();return{x:t.changedTouches[0].clientX-e.left,y:t.changedTouches[0].clientY-e.top,h:e.height,w:e.width}}a.addEventListener("touchstart",t=>{O=!0;const e=R(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=m,c=[],u!=="freeHand"&&L(e.x,e.y,h,m,v,e.h,e.w,u)});a.addEventListener("touchmove",t=>{if(O&&u==="freeHand"){const e=R(t);n.lineTo(e.x,e.y),n.stroke(),L(e.x,e.y,h,m,v,e.h,e.w,u)}});a.addEventListener("touchend",t=>{if(u!=="freeHand"){let e=R(t);L(e.x,e.y,h,m,v,e.h,e.w,u),D(c),o.push(c),f=o.length-1}else if(c.length!==0){if(c.length===1){const e=b({},c[0]);e.x+=1e-4,c.push(e),console.log(c)}o.push(c),f=o.length-1}O=!1});_.addEventListener("click",()=>{localStorage.setItem("saveCanvas",JSON.stringify(o)),g.textContent="Canvas Saved",setTimeout(p,1500)});$.addEventListener("click",()=>{localStorage.getItem("saveCanvas")?(o=JSON.parse(localStorage.saveCanvas),f=o.length-1,g.textContent="Canvas Loaded",x(),setTimeout(p,1500)):(g.textContent="Canvas Not Found",setTimeout(p,1500))});ee.addEventListener("click",()=>{localStorage.removeItem("saveCanvas"),g.textContent="Cleared Local Storage",setTimeout(p,1500)});T.addEventListener("click",()=>{T.firstElementChild.href=a.toDataURL("image/jpeg",1),T.firstElementChild.download="paint-example.jpeg",g.textContent="Image File Saved",setTimeout(p,1500)});const X=document.querySelector(".bucket-set"),k=document.querySelector(".bucket-color-wrapper"),ae=document.querySelector(".pen-tool"),P=document.querySelector(".pen-tools-wrapper"),F=document.querySelector(".drop-menu"),M=document.querySelector(".drop-menu-items-container");console.log(k,X);X.addEventListener("click",()=>{k.classList.toggle("invisible"),k.classList.toggle("scale-0"),k.classList.toggle("-translate-x-[100%]")});ae.addEventListener("click",()=>{P.classList.toggle("invisible"),P.classList.toggle("scale-0"),P.classList.toggle("-translate-x-[70%]")});F.addEventListener("click",()=>{F.firstElementChild.classList.toggle("-rotate-90"),M.classList.toggle("translate-x-[45%]"),M.classList.toggle("-translate-y-[70%]"),M.classList.toggle("scale-0")});
