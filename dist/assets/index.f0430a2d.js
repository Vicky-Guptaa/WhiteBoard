var W=Object.defineProperty;var q=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var P=(t,e,l)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,E=(t,e)=>{for(var l in e||(e={}))A.call(e,l)&&P(t,l,e[l]);if(q)for(var l of q(e))D.call(e,l)&&P(t,l,e[l]);return t};const B=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))g(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const S of c.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&g(S)}).observe(document,{childList:!0,subtree:!0});function l(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function g(s){if(s.ep)return;s.ep=!0;const c=l(s);fetch(s.href,c)}};B();const F=document.body,O=document.querySelector(".pen"),x=document.querySelector(".pen-color"),y=document.querySelector(".pen-slider"),b=document.querySelector(".bucket-color"),w=document.querySelector(".eraser"),M=document.querySelector(".clear"),L=document.querySelector(".save-image"),I=document.querySelectorAll(".header-icons-styles"),a=document.querySelector(".selected-tools"),z=document.querySelector(".save-storage"),J=document.querySelector(".load-storage"),U=document.querySelector(".delete-storage"),X=document.querySelector(".undo"),Y=document.querySelector(".redo"),r=document.createElement("canvas");r.id="canvas";const n=r.getContext("2d");let f=10,p="#fff",m="#000000",h=!1,k=!1,o=[],d=-1,i=[],T=!1;b.addEventListener("input",()=>{p=b.firstElementChild.value,v(),C()});x.addEventListener("input",()=>{h=!1,m=x.firstElementChild.value});w.addEventListener("click",()=>{a.textContent="Eraser",h=!0,I.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),w.classList.add("selected-icon-style"),m=p,f=50,y.firstElementChild.value=f});y.addEventListener("change",()=>{f=y.firstElementChild.value});O.addEventListener("click",u);X.addEventListener("click",H);Y.addEventListener("click",K);function H(){d<0||(d--,v(),C(),a.textContent="Undo",setTimeout(u,1e3))}function K(){o.length-1!==d&&(d++,v(),C(),a.textContent="Redo",setTimeout(u,1e3))}function u(){h=!1,a.textContent="Pen",m=x.firstElementChild.value,f=10,I.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),O.classList.add("selected-icon-style"),y.firstElementChild.value=f}function v(){r.width=window.innerWidth,r.height=window.innerHeight-75,n.fillStyle=p,n.fillRect(0,0,r.width,r.height),F.appendChild(r),u()}v();function C(){for(let t=0;t<=d;t++)for(let e=1;e<o[t].length;e++)n.beginPath(),n.moveTo(o[t][e-1].x,o[t][e-1].y),n.lineWidth=o[t][e-1].size,n.lineCap="round",o[t][e-1].erase?n.strokeStyle=p:n.strokeStyle=o[t][e-1].color,n.lineTo(o[t][e].x,o[t][e].y),n.stroke()}function N(t,e,l,g,s){const c={x:t,y:e,size:l,color:g,erase:s};o.length!=d&&(o=o.splice(0,d+1)),i.push(c)}M.addEventListener("click",()=>{v(),o=[],a.textContent="Canvas Cleared",setTimeout(u,1500)});function j(t){const e=r.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}r.addEventListener("mousedown",t=>{k=!0;const e=j(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=f,n.lineCap="round",n.strokeStyle=m,i=[]});r.addEventListener("mousemove",t=>{if(k){const e=j(t);n.lineTo(e.x,e.y),n.stroke(),N(e.x,e.y,f,m,h)}});r.addEventListener("mouseup",t=>{if(i.length!==0){if(i.length===1){const e=E({},i[0]);e.x+=1e-4,i.push(e),console.log(i)}o.push(i),d=o.length-1}k=!1});function R(t){const e=r.getBoundingClientRect();return{x:t.touches[0].clientX-e.left,y:t.touches[0].clientY-e.top}}r.addEventListener("touchstart",t=>{T=!0;const e=R(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=f,n.lineCap="round",n.strokeStyle=m,i=[]});r.addEventListener("touchmove",t=>{if(T){const e=R(t);n.lineTo(e.x,e.y),n.stroke(),N(e.x,e.y,f,m,h)}});r.addEventListener("touchend",t=>{if(i.length!==0){if(i.length===1){const e=E({},i[0]);e.x+=1e-4,i.push(e),console.log(i)}o.push(i),d=o.length-1}T=!1});z.addEventListener("click",()=>{localStorage.setItem("saveCanvas",JSON.stringify(o)),a.textContent="Canvas Saved",setTimeout(u,1500)});J.addEventListener("click",()=>{localStorage.getItem("saveCanvas")?(o=JSON.parse(localStorage.saveCanvas),d=o.length-1,a.textContent="Canvas Loaded",C(),setTimeout(u,1500)):(a.textContent="Canvas Not Found",setTimeout(u,1500))});U.addEventListener("click",()=>{localStorage.removeItem("saveCanvas"),a.textContent="Cleared Local Storage",setTimeout(u,1500)});L.addEventListener("click",()=>{L.firstElementChild.href=r.toDataURL("image/jpeg",1),L.firstElementChild.download="paint-example.jpeg",a.textContent="Image File Saved",setTimeout(u,1500)});
