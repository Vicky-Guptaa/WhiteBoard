var Q=Object.defineProperty;var H=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var z=(t,e,s)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,M=(t,e)=>{for(var s in e||(e={}))V.call(e,s)&&z(t,s,e[s]);if(H)for(var s of H(e))Z.call(e,s)&&z(t,s,e[s]);return t};const _=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function s(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(l){if(l.ep)return;l.ep=!0;const r=s(l);fetch(l.href,r)}};_();const $=document.querySelector(".for-canvas"),U=document.querySelector(".pen"),R=document.querySelector(".pen-color"),E=document.querySelector(".pen-slider"),B=document.querySelector(".bucket-color"),F=document.querySelector(".eraser"),A=document.querySelector(".clear"),W=document.querySelector(".save-image"),X=document.querySelectorAll(".header-icons-styles"),m=document.querySelector(".selected-tools"),ee=document.querySelector(".save-storage"),te=document.querySelector(".load-storage"),ne=document.querySelector(".delete-storage"),oe=document.querySelector(".undo"),se=document.querySelector(".redo"),le=document.querySelector("header"),re=document.querySelector(".diff-shapes"),I=document.querySelector(".diff-shapes-container"),ie=document.querySelectorAll(".shape"),u=document.createElement("canvas");u.id="canvas";const n=u.getContext("2d");let h=10,P="#fff",f="#000000",g=!1,N=!1,o=[],p=-1,c=[],j=!1,a="pen",C=[];re.addEventListener("click",()=>{I.classList.toggle("invisible"),I.classList.toggle("scale-0"),I.classList.toggle("-translate-x-[70%]")});ie.forEach(t=>{t.addEventListener("click",()=>{y(),a=t.getAttribute("data-value"),m.textContent=t.getAttribute("data-value")})});B.addEventListener("input",()=>{P=B.firstElementChild.value,S(),L()});R.addEventListener("input",()=>{g=!1,f=R.firstElementChild.value});F.addEventListener("click",()=>{m.textContent="Eraser",g=!0,a="pen",X.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),F.classList.add("selected-icon-style"),f=P,h=50,E.firstElementChild.value=h});E.addEventListener("change",()=>{h=E.firstElementChild.value});U.addEventListener("click",y);oe.addEventListener("click",ce);se.addEventListener("click",ae);function ce(){p<0||(p--,S(),L(),m.textContent="Undo",setTimeout(y,1e3))}function ae(){o.length-1!==p&&(p++,S(),L(),m.textContent="Redo",setTimeout(y,1e3))}function y(){a="pen",g=!1,m.textContent="Pen",f=R.firstElementChild.value,h=10,X.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),U.classList.add("selected-icon-style"),E.firstElementChild.value=h}function S(){u.width=window.innerWidth*.95,u.height=window.innerHeight-le.offsetHeight-50,n.fillStyle=P,n.fillRect(0,0,u.width,u.height),$.appendChild(u)}function de(){if(o.length===0)return;let t=u.offsetWidth,e=u.offsetHeight,s=o[0][0].h,d=o[0][0].w,l=t/d,r=e/s;for(let i=0;i<o.length;i++)for(let x=0;x<o[i].length;x++)o[i][x].w=t,o[i][x].h=e,o[i][x].x*=l,o[i][x].y*=r}window.addEventListener("resize",()=>{S(),console.log("Hello"),de(),L()});S();function L(){for(let t=0;t<=p;t++)if(!!o[t])for(let e=1;e<o[t].length;e++)o[t][e].shape==="pen"?(n.beginPath(),n.moveTo(o[t][e-1].x,o[t][e-1].y),n.lineWidth=o[t][e-1].size,n.lineCap="round",o[t][e-1].erase?n.strokeStyle=P:n.strokeStyle=o[t][e-1].color,n.lineTo(o[t][e].x,o[t][e].y),n.stroke()):(n.moveTo(o[t][e-1].x,o[t][e-1].y),n.beginPath(),q(o[t]))}A.addEventListener("click",()=>{S(),o=[],m.textContent="Canvas Cleared",setTimeout(y,1500)});function v(t,e,s,d,l,r,i,x,K){const G={x:t,y:e,size:s,color:d,erase:l,h:r,w:i,shape:x};o.length!==p&&(o=o.splice(0,p+1)),K.push(G)}function b(t){const e=u.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top,h:e.height,w:e.width}}u.addEventListener("mousedown",t=>{N=!0;const e=b(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=f,c=[],a!=="pen"&&(C=[],v(e.x,e.y,h,f,g,e.h,e.w,a,c),v(e.x,e.y,h,f,g,e.h,e.w,a,C))});u.addEventListener("mousemove",t=>{if(!!N)if(a==="pen"){const e=b(t);n.lineTo(e.x,e.y),n.stroke(),v(e.x,e.y,h,f,g,e.h,e.w,a,c);return}else{const e=b(t);v(e.x,e.y,h,f,g,e.h,e.w,a,C),S(),L(),n.beginPath(),n.moveTo(e.x,e.y),q(C)}});function k(t,e,s,d,l,r){switch(t){case"rectangle-stroke":{n.strokeRect(e,s,d,l);break}case"rectangle-fill":{n.fillStyle=r,n.fillRect(e,s,d,l);break}case"circle-stroke":{n.lineCap="round",n.arc(e,s,Math.max(l,d),0,2*Math.PI,!0),n.stroke();break}case"circle-fill":{n.lineCap="round",n.fillStyle=r,n.arc(e,s,Math.max(l,d),0,2*Math.PI,!0),n.fill();break}case"line":{n.lineCap="round",n.lineTo(e,s),n.stroke();break}case"pen":{n.lineTo(e,s),n.stroke();break}default:console.log("Something Went Wrong! The Chosen Shape Is Not In Option")}n.closePath()}function q(t){if(t.length<2)return;let e={x:t[0].x,y:t[0].y},s={x:t[t.length-1].x,y:t[t.length-1].y},d=t[0].color,l=t[0].shape,r=s.x-e.x,i=s.y-e.y;if(n.lineWidth=t[0].size,l==="line"){n.moveTo(e.x,e.y),k(l,s.x,s.y,r,i,d);return}if(l.includes("circle")){r=Math.abs(r),i=Math.abs(i),n.moveTo(s.x+Math.max(i,r),s.y),k(l,s.x,s.y,r,i,d);return}i>0&&r>0?k(l,e.x,e.y,r,i,d):i>0?k(l,s.x,e.y,Math.abs(r),i,d):r>0?k(l,e.x,s.y,r,Math.abs(i),d):k(l,s.x,s.y,Math.abs(r),Math.abs(i),d)}u.addEventListener("mouseup",t=>{if(a!=="pen"){let e=b(t);v(e.x,e.y,h,f,g,e.h,e.w,a,c),o.push(c),p=o.length-1,S(),L()}else if(c.length!==0){if(c.length===1){const e=M({},c[0]);e.x+=1e-4,c.push(e),console.log(c)}o.push(c),p=o.length-1}N=!1});function T(t){const e=u.getBoundingClientRect();return{x:t.changedTouches[0].clientX-e.left,y:t.changedTouches[0].clientY-e.top,h:e.height,w:e.width}}u.addEventListener("touchstart",t=>{j=!0;const e=T(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=f,c=[],a!=="pen"&&(C=[],v(e.x,e.y,h,f,g,e.h,e.w,a,c),v(e.x,e.y,h,f,g,e.h,e.w,a,C))});u.addEventListener("touchmove",t=>{if(!!j)if(a==="pen"){const e=T(t);n.lineTo(e.x,e.y),n.stroke(),v(e.x,e.y,h,f,g,e.h,e.w,a,c);return}else{const e=T(t);v(e.x,e.y,h,f,g,e.h,e.w,a,C),S(),L(),n.beginPath(),n.moveTo(e.x,e.y),q(C)}});u.addEventListener("touchend",t=>{if(a!=="pen"){let e=T(t);v(e.x,e.y,h,f,g,e.h,e.w,a,c),o.push(c),q(c),p=o.length-1}else if(c.length!==0){if(c.length===1){const e=M({},c[0]);e.x+=1e-4,c.push(e),console.log(c)}o.push(c),p=o.length-1}j=!1});ee.addEventListener("click",()=>{localStorage.setItem("saveCanvas",JSON.stringify(o)),m.textContent="Canvas Saved",setTimeout(y,1500)});te.addEventListener("click",()=>{localStorage.getItem("saveCanvas")?(o=JSON.parse(localStorage.saveCanvas),p=o.length-1,m.textContent="Canvas Loaded",L(),setTimeout(y,1500)):(m.textContent="Canvas Not Found",setTimeout(y,1500))});ne.addEventListener("click",()=>{localStorage.removeItem("saveCanvas"),m.textContent="Cleared Local Storage",setTimeout(y,1500)});W.addEventListener("click",()=>{W.firstElementChild.href=u.toDataURL("image/jpeg",1),W.firstElementChild.download="paint-example.jpeg",m.textContent="Image File Saved",setTimeout(y,1500)});const Y=document.querySelector(".bucket-set"),w=document.querySelector(".bucket-color-wrapper"),ue=document.querySelector(".pen-tool"),O=document.querySelector(".pen-tools-wrapper"),J=document.querySelector(".drop-menu"),D=document.querySelector(".drop-menu-items-container");console.log(w,Y);Y.addEventListener("click",()=>{w.classList.toggle("invisible"),w.classList.toggle("scale-0"),w.classList.toggle("-translate-x-[100%]")});ue.addEventListener("click",()=>{O.classList.toggle("invisible"),O.classList.toggle("scale-0"),O.classList.toggle("-translate-x-[70%]")});J.addEventListener("click",()=>{J.firstElementChild.classList.toggle("-rotate-90"),D.classList.toggle("translate-x-[45%]"),D.classList.toggle("-translate-y-[70%]"),D.classList.toggle("scale-0")});
