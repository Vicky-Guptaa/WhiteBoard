var V=Object.defineProperty;var z=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var B=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,I=(t,e)=>{for(var o in e||(e={}))Z.call(e,o)&&B(t,o,e[o]);if(z)for(var o of z(e))_.call(e,o)&&B(t,o,e[o]);return t};const ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function o(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(l){if(l.ep)return;l.ep=!0;const i=o(l);fetch(l.href,i)}};ee();const te=document.querySelector(".for-canvas"),K=document.querySelector(".pen"),j=document.querySelector(".pen-color"),k=document.querySelector(".pen-slider"),F=document.querySelector(".bucket-color"),J=document.querySelector(".eraser"),ne=document.querySelector(".clear"),O=document.querySelector(".save-image"),$=document.querySelectorAll(".header-icons-styles"),p=document.querySelector(".selected-tools"),oe=document.querySelector(".save-storage"),se=document.querySelector(".load-storage"),le=document.querySelector(".delete-storage"),ie=document.querySelector(".undo"),re=document.querySelector(".redo"),ce=document.querySelector("header"),ae=document.querySelector(".diff-shapes"),D=document.querySelector(".diff-shapes-container"),de=document.querySelectorAll(".shape"),u=document.createElement("canvas");u.id="canvas";const n=u.getContext("2d");let h=10,P="#fff",f="#000000",g=!1,H=!1,s=[],m=-1,a=[],W=!1,d="pen",L=[];ae.addEventListener("click",()=>{D.classList.toggle("invisible"),D.classList.toggle("scale-0"),D.classList.toggle("-translate-x-[70%]")});de.forEach(t=>{t.addEventListener("click",()=>{v(),d=t.getAttribute("data-value"),p.textContent=t.getAttribute("data-value")})});F.addEventListener("input",()=>{P=F.firstElementChild.value,S(),C()});j.addEventListener("input",()=>{g=!1,f=j.firstElementChild.value});J.addEventListener("click",()=>{p.textContent="Eraser",g=!0,d="pen",$.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),J.classList.add("selected-icon-style"),f=P,h=50,k.firstElementChild.value=h});k.addEventListener("change",()=>{h=k.firstElementChild.value});K.addEventListener("click",v);ie.addEventListener("click",ue);re.addEventListener("click",he);function ue(){m<0||(m--,S(),C(),p.textContent="Undo",setTimeout(v,1e3))}function he(){s.length-1!==m&&(m++,S(),C(),p.textContent="Redo",setTimeout(v,1e3))}function v(){d="pen",g=!1,p.textContent="Pen",f=j.firstElementChild.value,h=10,$.forEach(t=>{t.classList.contains("selected-icon-style")&&t.classList.remove("selected-icon-style")}),K.classList.add("selected-icon-style"),k.firstElementChild.value=h}function S(){u.width=window.innerWidth*.95,u.height=window.innerHeight-ce.offsetHeight*1.7,n.fillStyle=P,n.fillRect(0,0,u.width,u.height),te.appendChild(u)}function fe(){if(s.length===0)return;let t=u.offsetWidth,e=u.offsetHeight,o=s[0][0].h,c=s[0][0].w,l=t/c,i=e/o;for(let r=0;r<s.length;r++)for(let x=0;x<s[r].length;x++)s[r][x].w=t,s[r][x].h=e,s[r][x].x*=l,s[r][x].y*=i}window.addEventListener("resize",()=>{S(),console.log("Hello"),fe(),C()});S();function C(){for(let t=0;t<=m;t++)if(!!s[t])for(let e=1;e<s[t].length;e++)s[t][e].shape==="pen"?(n.beginPath(),n.moveTo(s[t][e-1].x,s[t][e-1].y),n.lineWidth=s[t][e-1].size,n.lineCap="round",s[t][e-1].erase?n.strokeStyle=P:n.strokeStyle=s[t][e-1].color,n.lineTo(s[t][e].x,s[t][e].y),n.stroke()):(n.moveTo(s[t][e-1].x,s[t][e-1].y),n.beginPath(),M(s[t]))}ne.addEventListener("click",()=>{S(),s=[],p.textContent="Canvas Cleared",setTimeout(v,1500)});function y(t,e,o,c,l,i,r,x,G){const Q={x:t,y:e,size:o,color:c,erase:l,h:i,w:r,shape:x};s.length!==m&&(s=s.splice(0,m+1)),G.push(Q)}function T(t){const e=u.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top,h:e.height,w:e.width}}u.addEventListener("mousedown",t=>{H=!0;const e=T(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=f,a=[],d!=="pen"&&(L=[],y(e.x,e.y,h,f,g,e.h,e.w,d,a),y(e.x,e.y,h,f,g,e.h,e.w,d,L))});u.addEventListener("mousemove",t=>{if(!!H)if(d==="pen"){const e=T(t);n.lineTo(e.x,e.y),n.stroke(),y(e.x,e.y,h,f,g,e.h,e.w,d,a);return}else{const e=T(t);y(e.x,e.y,h,f,g,e.h,e.w,d,L),S(),C(),n.beginPath(),n.moveTo(e.x,e.y),M(L)}});function E(t,e,o,c,l,i){switch(t){case"rectangle-stroke":{n.strokeStyle=i,n.strokeRect(e,o,c,l);break}case"rectangle-fill":{n.fillStyle=i,n.fillRect(e,o,c,l);break}case"circle-stroke":{n.lineCap="round",n.arc(e,o,Math.max(l,c),0,2*Math.PI,!0),n.strokeStyle=i,n.stroke();break}case"circle-fill":{n.lineCap="round",n.fillStyle=i,n.arc(e,o,Math.max(l,c),0,2*Math.PI,!0),n.fill();break}case"line":{n.lineCap="round",n.strokeStyle=i,n.lineTo(e,o),n.stroke();break}default:console.log("Something Went Wrong! The Chosen Shape Is Not In Option")}n.closePath()}function M(t){if(t.length<2)return;let e={x:t[0].x,y:t[0].y},o={x:t[t.length-1].x,y:t[t.length-1].y},c=t[0].color,l=t[0].shape,i=o.x-e.x,r=o.y-e.y;if(n.lineWidth=t[0].size,l==="line"){n.moveTo(e.x,e.y),E(l,o.x,o.y,i,r,c);return}if(l.includes("circle")){i=Math.abs(i),r=Math.abs(r),n.moveTo(o.x+Math.max(r,i),o.y),E(l,o.x,o.y,i,r,c);return}r>0&&i>0?E(l,e.x,e.y,i,r,c):r>0?E(l,o.x,e.y,Math.abs(i),r,c):i>0?E(l,e.x,o.y,i,Math.abs(r),c):E(l,o.x,o.y,Math.abs(i),Math.abs(r),c)}u.addEventListener("mouseup",t=>{if(d!=="pen"){let e=T(t);y(e.x,e.y,h,f,g,e.h,e.w,d,a),s.push(a),m=s.length-1,S(),C()}else if(a.length!==0){if(a.length===1){const e=I({},a[0]);e.x+=1e-4,a.push(e),console.log(a)}s.push(a),m=s.length-1}H=!1});function q(t){const e=u.getBoundingClientRect();return{x:t.changedTouches[0].clientX-e.left,y:t.changedTouches[0].clientY-e.top,h:e.height,w:e.width}}u.addEventListener("touchstart",t=>{W=!0;const e=q(t);n.moveTo(e.x,e.y),n.beginPath(),n.lineWidth=h,n.lineCap="round",n.strokeStyle=f,a=[],d!=="pen"&&(L=[],y(e.x,e.y,h,f,g,e.h,e.w,d,a),y(e.x,e.y,h,f,g,e.h,e.w,d,L))});u.addEventListener("touchmove",t=>{if(!!W)if(d==="pen"){const e=q(t);n.lineTo(e.x,e.y),n.stroke(),y(e.x,e.y,h,f,g,e.h,e.w,d,a);return}else{const e=q(t);y(e.x,e.y,h,f,g,e.h,e.w,d,L),S(),C(),n.beginPath(),n.moveTo(e.x,e.y),M(L)}});u.addEventListener("touchend",t=>{if(d!=="pen"){let e=q(t);y(e.x,e.y,h,f,g,e.h,e.w,d,a),s.push(a),M(a),m=s.length-1}else if(a.length!==0){if(a.length===1){const e=I({},a[0]);e.x+=1e-4,a.push(e),console.log(a)}s.push(a),m=s.length-1}W=!1});oe.addEventListener("click",()=>{localStorage.setItem("saveCanvas",JSON.stringify(s)),p.textContent="Canvas Saved",setTimeout(v,1500)});se.addEventListener("click",()=>{localStorage.getItem("saveCanvas")?(s=JSON.parse(localStorage.saveCanvas),m=s.length-1,p.textContent="Canvas Loaded",C(),setTimeout(v,1500)):(p.textContent="Canvas Not Found",setTimeout(v,1500))});le.addEventListener("click",()=>{localStorage.removeItem("saveCanvas"),p.textContent="Cleared Local Storage",setTimeout(v,1500)});O.addEventListener("click",()=>{O.firstElementChild.href=u.toDataURL("image/jpeg",1),O.firstElementChild.download="paint-example.jpeg",p.textContent="Image File Saved",setTimeout(v,1500)});const A=document.querySelector(".bucket-set"),b=document.querySelector(".bucket-color-wrapper"),ge=document.querySelector(".pen-tool"),R=document.querySelector(".pen-tools-wrapper"),U=document.querySelector(".drop-menu"),X=document.querySelector(".drop-menu-items-container");console.log(b,A);A.addEventListener("click",()=>{b.classList.toggle("invisible"),b.classList.toggle("scale-0"),b.classList.toggle("-translate-x-[100%]")});ge.addEventListener("click",()=>{R.classList.toggle("invisible"),R.classList.toggle("scale-0"),R.classList.toggle("-translate-x-[70%]")});U.addEventListener("click",()=>{U.firstElementChild.classList.toggle("-rotate-90"),X.classList.toggle("translate-x-[45%]"),X.classList.toggle("-translate-y-[70%]"),X.classList.toggle("scale-0")});const me=document.querySelector("canvas"),pe=document.querySelectorAll(".sticky-wrapper");let Y=0,N=0,w=!1;pe.forEach(t=>{t.addEventListener("mousedown",e=>{Y=e.clientX-t.offsetLeft,N=e.clientY-t.offsetTop,w=!0}),t.addEventListener("mousemove",e=>{if(!w)return;let o=e.clientY-N,c=e.clientX-Y;console.log(c,o),t.style.top=o+"px",t.style.left=c+"px"}),me.addEventListener("mousemove",e=>{if(!w)return;let o=e.clientY-N,c=e.clientX-Y;t.style.top=o+"px",t.style.left=c+"px"}),t.addEventListener("mouseup",()=>{w=!1}),t.addEventListener("drag",()=>!1)});
